= render partial: "layouts/header"

.search
  .search__wrapper
    .left__box
      = form_with( model: @item, url: {action: "create"}, data: {remote: false}) do |f|
        .sort
          .sort__icon
            = f.select :size, ["価格の安い順", "価格の高い順", "出品の古い順", "出品の新しい順", "いいね！の多い順", ], {prompt: "並べ替え"}, {class:"sort__select"}
        .search
          %h3 詳細検索

          = form_with( url: search_items_path, method: :get, data: {remote: false}, class:"header__box__upper__search-form") do |f|
            .search__keyword
              = f.label :キーワードを追加する, id:"title"
              = f.text_field :search, class:"header__box__upper__search-form__input", placeholder:"例）値下げ", name:"search"
              = f.button :get, class:"header__box__upper__search-form__btn" do
                = fa_icon 'search', class:"icon__black"
          
            = f.label :カテゴリーを選択する, id:"title"
            = f.fields_for :category_items do |c|
              = c.collection_select(:category_id, @category, :id, :category, {prompt: "---"}, class:"send__main__content__form__box3__content__group1__div__select__show", id:"parent-form")
          
          = form_with( url: search_items_path, method: :get, data: {remote: false}, class:"header__box__upper__search-form") do |f|
            .search__keyword
              = f.label :ブランド名から探す, id:"title"
              = f.text_field :search, class:"header__box__upper__search-form__input", placeholder:"例）シャネル", name:"search"
              = f.button :get, class:"header__box__upper__search-form__btn" do
                = fa_icon 'search', class:"icon__black"

          = form_with( model: @item, url: {action: "create"}, data: {remote: false}, class:"send__main__content__form" ) do |f|
            = f.label :サイズを指定する, id:"title"
            .send__main__content__form__box3__content__group2__select
              = f.select :size, [["XXS以下", "XXS以下"], ["XS(SS)", "XS(SS)"], ["S", "S"], ["M", "M"], ["L", "L"], ["XL(LL)", "XL(LL)"],["2XL(3L)", "2XL(3L)"],["3XL(4L)", "3XL(4L)"],["4XL(5L)", "4XL(5L)"],["FREE SIZE", "FREE SIZE"]], {prompt: "---"}, {class:"send__main__content__form__box3__content__group1__div__select__show"}

          = form_with( url: search_items_path, method: :get, data: {remote: false}, class:"header__box__upper__search-form") do |f|
            .search__keyword
              = f.label :価格, id:"title"
              = f.text_field :search, class:"header__box__upper__search-form__input", placeholder:"例）シャネル", name:"search"
              = f.button :get, class:"header__box__upper__search-form__btn" do
                = fa_icon 'search', class:"icon__black"

          .search__item-status 商品の状態
          .check-box
            = check_box_tag :check
            = label_tag :check, "新品、未使用"
          .check-box
            = check_box_tag :check
            = label_tag :check, "目立った傷や汚れなし"
          .check-box
            = check_box_tag :check
            = label_tag :check, "傷や汚れあり"
          .check-box
            = check_box_tag :check
            = label_tag :check, "未使用に近い"
          .check-box
            = check_box_tag :check
            = label_tag :check, "やや傷や汚れあり"
          .check-box
            = check_box_tag :check
            = label_tag :check, "全体的に状態が悪い"

          .search__deribary-fee 配送料の負担
          .check-box
            = check_box_tag :check
            = label_tag :check, "送料込み(出品者負担)"
          .check-box
            = check_box_tag :check
            = label_tag :check, "着払い(購入者負担)"

          .search__order-status 販売状況
          .check-box
            = check_box_tag :check
            = label_tag :check, "販売中"
          .check-box
            = check_box_tag :check
            = label_tag :check, "売り切れ"

          = f.submit "クリア", id:""
          = f.submit "完了", id:"post"
          

    .right__box
      .search-sort
      %section.search-container
        %h2.result
          #{params[:search]} 
          %span の検索結果
        .search-container__count
          = "1 - #{@items.length}件表示"
        .search-container__results
          - @items.each do |item|
            = link_to(item_path(item.id), method: :get, class: "category__new-items__itembox__item") do
              .search-container__results__itembox__item__image
                - if Rails.env.development?
                  = image_tag "/uploads/image/image/#{item.images.ids[0]}/"+item.images[0][:image], class: "search-container__results__itembox__item__image-url"
                - if Rails.env.production?
                  = image_tag item.images[0].image.url, class: "search-container__results__itembox__item__image-url"
                .search-container__results__itembox__item__image__price
                  = "¥#{item.price}"
              .search-container__results__itembox__item__name
                = item.name

-# = paginate(@items)
= render partial: "layouts/button"
= render partial: "layouts/aside"
= render partial: "layouts/footer"